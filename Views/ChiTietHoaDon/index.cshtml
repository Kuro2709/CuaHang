@model List<CuaHang.Models.ThongTinChiTietHoaDon>

@{
    ViewBag.Title = "Chi tiết hóa đơn";
    var invoice = ViewBag.Invoice as CuaHang.Models.ThongTinHoaDon;
}

<h2>Chi tiết hóa đơn</h2>

@if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
{
    <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
}

@if (invoice != null)
{
    <div>
        <hr />
        <dl class="dl-horizontal">
            <dt>Mã số hóa đơn</dt>
            <dd>@invoice.InvoiceID</dd>

            <dt>Mã khách hàng</dt>
            <dd>@invoice.CustomerID</dd>

            <dt>Ngày hóa đơn</dt>
            <dd>@invoice.InvoiceDate.ToString("yyyy-MM-dd")</dd>

            <dt>Tổng giá</dt>
            <dd>@invoice.TotalPrice</dd>
        </dl>
    </div>
}
else
{
    <div class="alert alert-warning">Hóa đơn không tồn tại.</div>
}

<h4>Chi tiết sản phẩm</h4>
<div id="grid"></div>

<script>
    $(document).ready(function () {
        $("#grid").kendoGrid({
            dataSource: {
                data: @Html.Raw(Json.Encode(Model)),
                schema: {
                    model: {
                        fields: {
                            ProductID: { type: "string" },
                            Product: { type: "object" },
                            Quantity: { type: "number" },
                            TotalPrice: { type: "number" }
                        }
                    }
                },
                pageSize: 10
            },
            pageable: true,
            columns: [
                { field: "ProductID", title: "Mã sản phẩm" },
                { field: "Product.ProductName", title: "Tên sản phẩm" },
                { field: "Quantity", title: "Số lượng" },
                { field: "TotalPrice", title: "Tổng giá", format: "{0:c}" }
            ]
        });
    });
</script>

<div>
    @Html.ActionLink("Quay lại", "Index", "HoaDon")
</div>
